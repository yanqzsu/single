/*! For license information please see plugin.js.LICENSE.txt */
var handlers;(()=>{"use strict";var __webpack_modules__={6791:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=t.ActionType=void 0;t.MessageType={initDomain:"INIT_DOMAIN",openInBrowser:"OPEN_IN_BROWSER",sketchArtboradNumber:"SKETCH_ARTBORAD_INFO",closeSketch:"CLOSE_SKETCH",retryUploadArtborads:"RETRY_UPLOAD_ARTBPRADS",uploadArtboradIDs:"UPLOAD_ARTBORAD_IDS",designExportArtborad:"DESIGN_EXPORT_ARTBORAD",versionInfo:"GET_VERSION_INFO",updateClearStatus:"UPDATE_CLEAR_STATUS"};t.ActionType={DOMAIN_SET_SUCCEED:"DOMAIN_SET_SUCCEED",DOMAIN_SET_FAILED:"DOMAIN_SET_FAILED",SKETCH_SELECT_CAHNGE:"SKETCH_SELECT_CAHNGE",EXPORT_EXPORT_PROGRESS:"EXPORT_EXPORT_PROGRESS",SINGLE_BORAD_UPLOAD:"SINGLE_BORAD_UPLOAD",ARTBOARD_EXPORT_SUCCESS:"ARTBOARD_EXPORT_SUCCESS",ALL_ARTBORAD_EXPORT_SUCCESS:"ALL_ARTBORAD_EXPORT_SUCCESS",DEBUG_SEKCT_LOG:"debug_sketch_log",PARSE_ARTBOARD_INFO:"parse_artboard_info"}},2193:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BridgeMessageHandler=void 0;var o=r(6791),a=n(r(857)),i=r(9716),s=r(2611),u=new a.default({"userContentController:didReceiveScriptMessage:":function(e,t){try{var r=JSON.parse(decodeURIComponent(t.body()));c(r)}catch(n){log("Could not parse bridge message"),log(n.message)}}});t.BridgeMessageHandler=u;var c=function(e){var t=e.type,r=e.payload;switch(log({msg:"create Message Handler",type:t,payload:r}),t){case o.MessageType.initDomain:var n=r.domain,a=r.ping;return void(0,s.initDomain)(n,a);case o.MessageType.openInBrowser:var u=r.url;return void(0,s.openInBrowser)(u);case o.MessageType.sketchArtboradNumber:return void(0,s.sketchArtboradNumber)();case o.MessageType.closeSketch:return void(0,s.closeSketchPlugin)();case o.MessageType.retryUploadArtborads:var c=r.retryIDs,l=r.params;return void(0,s.retryUpload)(c,l);case o.MessageType.uploadArtboradIDs:var f=r;return void(0,s.getArtboradIDList)(f);case o.MessageType.designExportArtborad:var d=r.projectCid,p=r.url;return void(0,s.designUpload)(d,p);case o.MessageType.versionInfo:return void(0,s.getVersionInfo)();case o.MessageType.updateClearStatus:return console.log("接收到web端的清除:=="),void(0,i.updateClearStatus)(!1)}}},3152:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Settings",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"UI",{enumerable:!0,get:function(){return i.default}}),t.getContext=function(){return u},t.getDocument=l,t.getPagesLocation=function(){var e=(t=u.scriptPath.split("/"),t.splice(-3,3),t.join("/"));var t;return"".concat(e,"/Contents/Sketch/pages")},t.getPluginVersion=function(){var e=NSProcessInfo.processInfo().operatingSystemVersionString(),t=NSBundle.mainBundle().objectForInfoDictionaryKey("CFBundleShortVersionString");return"macOS ".concat(e,"/sketch ").concat(t,"/plugin ").concat(c)},t.getSelectedLayers=function(){var e=l();if(!e)return null;if(!e.selectedLayers())return null;var t=e.selectedLayers().layers();if(!t)return null;return t},t.setContext=function(e){u=e},Object.defineProperty(t,"sketch",{enumerable:!0,get:function(){return o.default}}),t.sketchPluginVersion=void 0;var o=n(r(7290)),a=n(r(3726)),i=n(r(5349)),s=n(r(8552)),u=null,c=s.default.version;function l(){return u.document||u.actionContext.document||MSDocument.currentDocument()}t.sketchPluginVersion=c},5450:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.closeSketch=s,t.createWindow=function(e){var t=NSMakeRect(0,0,a,i),r=NSPanel.alloc().initWithContentRect_styleMask_backing_defer(t,3,2,!1);return r.center(),NSThread.mainThread().threadDictionary()[e]=r,r.makeKeyAndOrderFront(null),r.setLevel(NSFloatingWindowLevel),r.standardWindowButton(NSWindowCloseButton).setCOSJSTargetFunction((function(e){s()})),{window:r,frame:t}},t.reuploadInfoIdentifier=void 0;var n=r(665),o=r(5606);t.reuploadInfoIdentifier="reuploadInfoIdentifier";var a=432,i=689;function s(){var e,t=(e=o.windowIdentifier,NSThread.mainThread().threadDictionary()[e].contentView().subviews()[0]),r=(0,o.findWindow)(o.windowIdentifier);t.reload(),r.close(),NSThread.mainThread().threadDictionary().removeObjectForKey(o.windowIdentifier),(0,n.clearUploadaFailList)(),coscript.setShouldKeepAround(!1)}},5606:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.createWebView=function(e){(f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SketchBridge";coscript.setShouldKeepAround(!0);var r=WKWebViewConfiguration.alloc().init(),n=i.BridgeMessageHandler.new();return r.userContentController().addScriptMessageHandler_name(n,t),WKWebView.alloc().initWithFrame_configuration(e,r)}(e,"Sketch")).setAutoresizingMask(18),f.configuration().preferences().setValue_forKey(!0,"developerExtrasEnabled");var t="ABOARD_SKETCH_PLUGIN/"+s.default.version;f.setValue_forKey(t,"customUserAgent");var r="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),n=MOClassDescription.allocateDescriptionForClassWithName_superclass(r,NSObject);n.registerClass(),n.addInstanceMethodWithSelector_function_(NSSelectorFromString("webView:didFinishNavigation:"),function(e,t){(0,c.clearUploadaFailList)(),(0,u.getClearStatus)()&&v("clear_cache_info",{}),process.env.DEV}.bind(this)),f.navigationDelegate=NSClassFromString(r).new();var l=(0,a.initRoute)(),p=l.local,h=l.path;if(log({local:p,path:h}),p){d((0,o.getPagesLocation)()+h+".html")}else{var g=s.default.sketchInfo,y=g.host;g.permise&&(0,u.getDomain)()&&(y=(0,u.getDomain)()),log({jumpPath:y+h}),f.loadRequest(NSURLRequest.requestWithURL(NSURL.URLWithString(y+h)))}return f},t.findWindow=p,t.loadLocalWebView=d,t.sendAction=g,t.sendActionChan=y,t.windowIdentifier=t.sendActionToWebviewByChan=t.sendActionToWebview=void 0;var o=r(3152),a=r(2611),i=r(2193),s=n(r(8552)),u=r(9716),c=r(665),l="MockingBot--window--".concat(s.default.identifier);t.windowIdentifier=l;var f=null;function d(e){var t=NSURL.fileURLWithPath(e);f.loadFileURL_allowingReadAccessToURL(t,NSURL.URLWithString("file:///"))}function p(e){return NSThread.mainThread().threadDictionary()[e]}function h(e){return p(e).contentView().subviews()[0]}function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&e.evaluateJavaScript_completionHandler){var n={type:t,payload:r},o="sketchBridge(".concat(JSON.stringify(n),");");e.evaluateJavaScript_completionHandler(o,null)}}function y(e,t){if(e&&e.evaluateJavaScript_completionHandler){var r="nativeCallBack(".concat(JSON.stringify(t),");");e.evaluateJavaScript_completionHandler(r,null)}}var v=function(e,t){return g(h(l),e,t)};t.sendActionToWebview=v;t.sendActionToWebviewByChan=function(e){return y(h(l),e)}},8253:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedArtboardByLayers=t.getPageAllArtboradByLayers=t.getCurrentDocumentPages=t.getArtboradInfoWithType=t.getArtboardSymbols=t.detachSymbolAndRemoveHidden=void 0;var o=n(r(420)),a=function e(t){return t.type===o.default.Types.Artboard?t:t.type===o.default.Types.Page?null:e(t.parent)},i=function(e){var t=[],r=new Set([]);return e.forEach((function(e){if(e&&e.id){var n=e.id;r.has(n)||(t.push(e),r.add(n))}})),t},s=function(e){var t=o.default.getSelectedDocument().selectedPage,r=t.name,n=t.id,s=t.layers,u=i(s.map((function(e){return a(e)})));return e?{page:{name:r,id:n},number:u.length}:{page:{name:r,id:n},artborads:u}};t.getPageAllArtboradByLayers=s;var u=function(e,t){var r=o.default.getSelectedDocument().pages;if(t)return r.length;var n=[];return r.forEach((function(t){var r=t.layers,o=i(r.map((function(e){return a(e)})));if(e){var s=t.id;o=o.map((function(e){return{id:e.id,pageID:s}}))}n.push.apply(n,o)})),{pages:r,allArtborads:n}};t.getCurrentDocumentPages=u;var c=function(e){var t=o.default.getSelectedDocument(),r=t.selectedLayers,n=i(r.map((function(e){return a(e)})));if(e)return n.length;var s=t.selectedPage;return{page:{name:s.name,id:s.id},artborads:n}};t.getSelectedArtboardByLayers=c;t.getArtboradInfoWithType=function(e){return"3"===e?u().allArtborads:"2"===e?s().artborads:c().artborads};t.getArtboardSymbols=function e(t,r,n){if(t&&t.sketchObject.class()!=MSSliceLayer)if(t.type==o.default.Types.Artboard||t.type==o.default.Types.Group)t.layers&&t.layers.length&&t.layers.forEach((function(t){return e(t,r,n)}));else if(t.type==o.default.Types.SymbolInstance){var a=t.id,i=t.duplicate(),s=i.detach({recursively:!1});if(s){var u=[];s.layers&&l(s.layers,u);var c=MSJSONDataArchiver.new().archivedDataWithRootObject_error(s._object.immutableModelObject(),null),f=NSString.alloc().initWithData_encoding(c,NSUTF8StringEncoding),d=JSON.parse(f);u.length&&function e(t){t.layers&&t.layers.length&&t.layers.forEach((function(t){-1!==u.findIndex((function(e){return e===t.do_objectID}))&&(t.isSymbol=!0),e(t)}))}(d),d.isSymbol=!0,d.do_objectID=a;var p=s.id;r.push(d),n.push({group:s,copyLayer:i,copyID:p})}else i.remove()}};var l=function e(t,r){t.forEach((function(t){if(t.type===o.default.Types.SymbolInstance){var n=t.detach({recursively:!1});n&&(r.push(n.id),n.layers&&n.layers.length&&e(n.layers,r))}else t.layers&&t.layers.length&&e(t.layers,r)}))};t.detachSymbolAndRemoveHidden=function e(t,r,n){if(t.layers&&t.layers.length){var o=[];t.layers.forEach((function(e){var t=e.do_objectID,a=r.find((function(e){return e.do_objectID===t})),i=n.find((function(e){return e.copyID===t}));i||(a?(o.push(a),r.splice(r.indexOf(a),1)):o.push(e))})),t.layers=o}var a=t._class,i=t.layers;i&&i.length>0&&i.forEach((function(t){return e(t,r,n)})),f(t),null!=t&&"slice"!==a&&"bitmap"===a&&(t.image={})};var f=function(e){var t=e.style,r=e.overrideValues;if(t){var n=t.borders,o=t.fills;n&&n.forEach((function(e){e.image&&(e.image={})})),o&&o.forEach((function(e){e.image&&(e.image={})}))}r&&r.forEach((function(e){var t=e.overrideName,r=e.value;-1!==t.indexOf("image")&&r&&(r.data={})}))}},7981:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.getParseArtboardData=void 0;var o=n(r(292)),a=n(r(7006)),i=n(r(6320)),s=n(r(8167)),u=n(r(420)),c=r(3615),l=r(5325),f=r(8253),d=r(2346),p=r(738);t.getParseArtboardData=function(e,t,r,n){return function(){return new Promise((function(p,y){var v=r.apiVersion,_=r.design_scale,b=new c.Queue,m=u.default.fromNative(e)._object,S=MSJSONDataArchiver.new().archivedDataWithRootObject_error(m.immutableModelObject(),null),w=NSString.alloc().initWithData_encoding(S,NSUTF8StringEncoding),A=JSON.parse(w),x=JSON.stringify(A),T=(0,s.default)(x),k=[],O=[];(0,f.getArtboardSymbols)(u.default.fromNative(e.sketchObject),k,O);var C=e.sketchObject.parentGroup(),E=u.default.fromNative(C).id,D=MSJSONDataArchiver.new().archivedDataWithRootObject_error(m.immutableModelObject(),null),N=NSString.alloc().initWithData_encoding(D,NSUTF8StringEncoding),P=JSON.parse(N);(0,f.detachSymbolAndRemoveHidden)(P,k,O);var L=(0,l.parseArtboard)(P,e,v),I=L.artboardObj,U=L.sliceLayerIDs,R=L.exportLayers,B=function(){O.forEach((function(e){var t=e.group,r=e.copyLayer;t.remove(),r.remove()}))};R&&0!==R.length||B(),R.forEach((function(e){var t=e.id;b.add(g(e,U.includes(t),t))})),b.exec().then((function(r){var s=r;B(),O=[];var u=[],c={},l=function(){var e,r=(0,i.default)(s);try{for(r.s();!(e=r.n()).done;){var n=e.value;"artboard"===n.type?(n.md5_hash=T,c=n):(n.id=d.util.toString(t),u.push(n))}}catch(o){r.e(o)}finally{r.f()}f()},f=function(){var r=(0,a.default)(o.default.mark((function r(){var a,i,s;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=d.util.toString(e.name),i={design_scale:d.util.toString(_)||"",artboard_sketch_id:d.util.toString(t),project_cid:n,md5_hash:T,artboard_name:a,upload_scene:"sketch"},s=Object.assign(c,{name:e.name,artboardJson:JSON.stringify(I),headerInfo:{upload_params:i}});try{p({id:t,sliceInfos:u,md5Hash:T,artboardInfo:s,pageID:E})}catch(o){console.log("### json error:",o)}case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();h(e)().then((function(e){s.push(e),setTimeout((function(){l()}),3)}),(function(){l()}))}))}))}};var h=function(e){return function(){return new Promise((function(t,r){try{var n=e.id,o=e.name,a=u.default.export(e,{output:!1,formats:"png",scales:"2x",overwriting:!0,"use-id-for-name":!0,"save-for-web":!1,"group-contents-only":!0});try{var i=JSON.stringify(a);t({type:"artboard",id:d.util.toString(n),name:d.util.toString(o),pngBuffer:i})}catch(s){console.log("#####"),r(s)}}catch(c){r(c)}}))}},g=function(e,t,r){return function(){return new Promise((function(n,o){try{var a={output:!1,formats:"png",scales:"4x",overwriting:!0,"use-id-for-name":!0,"save-for-web":!1,"group-contents-only":!0},i={},s="slice-".concat(r,".png"),c=u.default.export(e,a),l=JSON.stringify(c);i.png={pngKey:s,buffer:l};var f=[[{name:s},(0,p.fromNodejsBuffer)(c)]];if(t){var d="slice-".concat(r,".svg");a.formats="svg",a.scales="";var h=u.default.export(e,a),g=JSON.stringify(h);i.svg={svgKey:d,buffer:g},f.push([{name:d},(0,p.fromNodejsBuffer)(h)])}n(i)}catch(y){o(y)}}))}}},5325:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.parseArtboard=function(e,t,r){var n=JSON.stringify(e),f=[];!function e(t){var r,n=(0,i.default)(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.isVisible)if("group"==o._class){var s=o.layers,u=(0,a.default)(o,c);f.push(u),e(s)}else if("shapeGroup"==o._class){var d=o.layers,p=(0,a.default)(o,l);f.push(p),e(d)}else f.push(o)}}catch(h){n.e(h)}finally{n.f()}}((0,o.default)(e.layers));var d=f.map((function(e){return"bitmap"===e._class?e.frame:null})).filter(Boolean),p=function(e,t){var r=e.x,n=e.y,o=r+e.width,a=n+e.height,i=t.x,s=t.y,u=i+t.width;return!(s+t.height<=n||a<=s||r>=u||i>=o)},h={},g=f.filter((function(e){var t=e.exportOptions.exportFormats;if(t&&t.length>0&&"artboard"!==e._class){var r=e.frame,n=(e._class,function(e){for(var t=0;t<d.length;t++){var r=d[t];if(p(r,e))return!1}return!0}(r));return h[e.do_objectID]={png:!0,svg:n},n}return!1})).map((function(e){return e.do_objectID})),y=[];!function e(t){t.exportFormats&&t.exportFormats.length>0&&t.type!==s.default.Types.Artboard&&y.push(t),t.layers&&t.layers.length>0&&t.layers.forEach((function(t){return e(t)}))}(t);var v={};y.forEach((function(e){var t=e.id,r=h[t];r&&(v[t]=r)}));var _=NSBundle.mainBundle().objectForInfoDictionaryKey("CFBundleShortVersionString");return{artboardObj:{"artboard-json":JSON.parse(n),"X:aboard-export-map":v,"V:sketch-app":"".concat(_),"V:plugin":"".concat(u.sketchPluginVersion),"V:plugin-api":r},sliceLayerIDs:g,exportLayers:y}};var o=n(r(4197)),a=n(r(9213)),i=n(r(6320)),s=n(r(420)),u=r(3152),c=["layers"],l=["layers"]},3342:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(8073)),a=n(r(1372)),i=function(){function e(t){(0,o.default)(this,e),this.retry_counts_map={},this.retry_times=t.retry_times||3,this.concurrent_size=t.concurrent_size,this.task_pool=(t.tasks||[]).map((function(e,t){return e.id=t,e})),this.handler=t.handler,this.retry_fun=t.retry_fun,this.task_quene=[],this.failed_tasks=[],this.success_count=0,this.uploadFinishNumber=0,this.taskNumber=t.tasks.length,this.progressHandle=t.progressHandle}return(0,a.default)(e,[{key:"updateProgress",value:function(){this.uploadFinishNumber++,this.progressHandle(this.uploadFinishNumber/this.taskNumber)}},{key:"start",value:function(){if(0!==this.task_quene.length||0!==this.task_pool.length)for(var e=this.task_quene.length;e<this.concurrent_size;e++){var t=this.task_pool.shift();if(!t)return;this.push(t)}else this.handler({succees:this.success_count,failed:this.failed_tasks.length,failed_tasks:this.failed_tasks})}},{key:"push",value:function(e){var t,r=this,n=(t=e)().then((function(){r.success_count=r.success_count+1,r.updateProgress(),r.remove(t)})).catch((function(){r.retry(e)}));this.task_quene.push(n)}},{key:"remove",value:function(e){this.task_quene.splice(this.task_quene.findIndex((function(t){return t.id===e.id})),1),this.start()}},{key:"retry",value:function(e){var t=this;this.retry_counts_map[e.id]?this.retry_counts_map[e.id]=this.retry_counts_map[e.id]+1:this.retry_counts_map[e.id]=1,this.retry_counts_map[e.id]>this.retry_times?(this.failed_tasks.push(e),this.updateProgress()):this.retry_fun?this.retry_fun().then((function(){t.task_pool.unshift(e)})).catch((function(r){t.failed_tasks.push(e)})):this.task_pool.unshift(e),this.remove(e)}}]),e}();t.default=i},3615:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;var o=n(r(8073)),a=n(r(1372)),i=function(){function e(){(0,o.default)(this,e),this.processing=!1,this.queue=[],this.isCanceled=!1}return(0,a.default)(e,[{key:"add",value:function(e){this.processing||this.queue.push(e)}},{key:"cancel",value:function(){this.isCanceled=!0}},{key:"exec",value:function(){var e=this;return this.processing=!0,new Promise((function(t,r){var n=[];!function r(){if(0===e.queue.length)return e.processing=!1,void t(n);e.queue.shift()().then((function(e){n.push(e),setTimeout((function(){r()}),1)}),(function(e){setTimeout((function(){r()}),1)}))}()}))}}]),e}();t.Queue=i},5547:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SerialQueue=void 0;var o=n(r(8073)),a=n(r(1372)),i=function(){function e(){(0,o.default)(this,e),this.processing=!1,this.tasks=[],this.isCanceled=!1}return(0,a.default)(e,[{key:"addTast",value:function(e){this.processing||this.tasks.push(e)}},{key:"cancel",value:function(){this.isCanceled=!0}},{key:"startTask",value:function(e){var t=this;this.processing=!0;!function r(){0!==t.tasks.length?t.tasks.shift()().then((function(t){e(t),r()}),(function(t){e(t),r()})):t.processing=!1}()}}]),e}();t.SerialQueue=i},3160:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UploadQueue=void 0;var o=n(r(8073)),a=n(r(1372)),i=function(){function e(t){(0,o.default)(this,e),this.progressing=!1,this.tasks=[],this.isCanceled=!1,this.isStart=!1,this.progressHandle=t.progressHandle}return(0,a.default)(e,[{key:"addTast",value:function(e){this.tasks.push(e),this.isStart&&!this.processing&&this.startTask()}},{key:"cancel",value:function(){this.isCanceled=!0,this.progressHandle}},{key:"startTask",value:function(){if(this.progressing=!0,this.isStart=!0,0!==this.tasks.length){var e=this.tasks.shift(),t=this.progressHandle;e().then((function(e){t(!0,e),this.startTask()}),(function(e){t(!1,e),this.startTask()})),this.startTask()}else this.progressing=!1}}]),e}();t.UploadQueue=i},295:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.artboradAddVersion=void 0,t.checkUrl=function(e){var t="".concat(e,"/on_premises/ping"),r=NSMutableURLRequest.new();return r.setHTTPMethod("GET"),r.setURL(NSURL.URLWithString(t)),r.timeoutInterval=10,i(r)},t.designUploadArtborad=t.designSliceUpload=void 0;var n="POST",o=r(4045);t.designUploadArtborad=function(e,t){return a(e,t)};t.designSliceUpload=function(e,t){return a(e,t)};t.artboradAddVersion=function(e,t){var r=NSMutableURLRequest.new();r.setHTTPMethod(n),r.setURL(NSURL.URLWithString(t)),r.setValue_forHTTPHeaderField("application/json","Content-Type");var o=NSJSONSerialization.dataWithJSONObject_options_error(e,null,null);return r.setHTTPBody(o),i(r)};var a=function(e,t){var r=e.projectCid,a=e.artboardSketchID,i=e.arrayBuffer,s="".concat(t,"?project_cid=").concat(r,"&artboard_sketch_id=").concat(a);return new Promise((function(e,t){o(s,{method:n,body:Buffer.from(i),credentials:!0}).then((function(e){return e.text()})).then((function(r){try{var n=JSON.parse(r),o=n.code;u(o)?e(n):t(n,o)}catch(a){t(a)}})).catch((function(e){console.log("### buffer err:",e),t(e)}))}))};function i(e){return new Promise((function(t,r){try{(n=NSURLSessionConfiguration.defaultSessionConfiguration(),n.setHTTPCookieStorage(NSHTTPCookieStorage.sharedHTTPCookieStorage()),NSURLSession.sessionWithConfiguration(n)).dataTaskWithRequest_completionHandler(e,__mocha__.createBlock_function('v32@?0@"NSData"8@"NSURLResponse"16@"NSError"24',(function(e,n,o){var a=s(n);o?r({error:o,statusCode:a}):u(a)?t({data:c(e),statusCode:a}):r({error:o,statusCode:a,data:c(e)})}))).resume()}catch(o){r(o)}var n}))}var s=function(e){var t=500;return e&&e.statusCode&&e.statusCode()&&(t=e.statusCode()),t},u=function(e){return e>=200&&e<=299},c=function(e){var t={};if(e)try{var r=NSString.alloc().initWithData_encoding(e,NSUTF8StringEncoding);t=JSON.parse(r),console.log("请求的结果:==",t)}catch(n){console.log("fetch response data failed, with err: ",n)}return t}},9716:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.updateClearStatus=t.setDomain=t.initSetting=t.getDomain=t.getClearStatus=t.clearSettings=void 0;var o=r(3152),a=n(r(8552)),i=o.sketchPluginVersion+"domain",s="sketchPluginClear";t.initSetting=function(){var e=a.default.sketchInfo.permise,t=e?"":"https://modao.cc";console.log("Primise: ".concat(!!e,", defaultDomain: ").concat(t)),o.Settings.setSettingForKey(i,o.Settings.settingForKey(i)||t),log({initalLog:"display settings"}),log({domain:o.Settings.settingForKey(i)})};t.getDomain=function(){return console.log("[getDomain]:",o.Settings.settingForKey(i)),o.Settings.settingForKey(i)};t.setDomain=function(e){return console.log("[setDomain]:",e),o.Settings.setSettingForKey(i,e)};t.clearSettings=function(){o.Settings.setSettingForKey(i,"")};t.getClearStatus=function(){return console.log("[clear]:",o.Settings.settingForKey(s)),o.Settings.settingForKey(s)};t.updateClearStatus=function(e){return o.Settings.setSettingForKey(s,e)}},2346:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.util=t.packAboardBinaryPacketV1Node=t.KEY_PAYLOAD_META_LIST=void 0;var o=n(r(292)),a=n(r(5030)),i=n(r(6595)),s=n(r(6320)),u=n(r(7006)),c=r(4023),l=r(738),f={toBool:function(e){return!!e},toArray:function(e){for(var t=[],r=0;r<e.count();r++)t.push(e.objectAtIndex(r));return t},toObject:function(e){var t={};for(var r in e)t[r]=e[r];return t},toString:function(e){return"".concat(e)},toSafeString:function(e){return this.toString(e).replace(/[\n\r\u2028\u2029]/g,"\n")},map:function(e,t){for(var r=[],n=e.count?e.count():e.length,o=0;o<n;o++){var a=e.objectAtIndex?e.objectAtIndex(o):e[o];r.push(t(a,o))}return r},filter:function(e,t){for(var r=[],n=e.className&&"__NSArrayM"==e.className()?e.count():e.length,o=0;o<n;o++){var a=t(e[o],o);a&&r.push(a)}return r},uint8ArrayToString:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},stringToUint8Array:function(e){for(var t=[],r=0,n=e.length;r<n;++r)t.push(e.charCodeAt(r));return new Uint8Array(t)}};t.util=f;var d="@@payloadMetaList";t.KEY_PAYLOAD_META_LIST=d;var p=function(){var e=(0,u.default)(o.default.mark((function e(t,r,n){var u,l,f,p,h,g,y,v;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t["@@payloadMetaList"]){e.next=2;break}throw new Error("should not use key '".concat(d,"' in headerInfo"));case 2:u=[],l=[],f=(0,s.default)(r),e.prev=5,f.s();case 7:if((p=f.n()).done){e.next=15;break}if(h=(0,a.default)(p.value,2),g=h[0],y=h[1],g&&y){e.next=11;break}throw new Error("invalid payloadList #".concat(u.length));case 11:u.push(g),l.push(y);case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),f.e(e.t0);case 20:return e.prev=20,f.f(),e.finish(20);case 23:return e.next=25,n(JSON.stringify((0,i.default)({[d]:u},t)));case 25:return v=e.sent,e.abrupt("return",(0,c.packArrayBufferListPacket)([v].concat(l)));case 27:case"end":return e.stop()}}),e,null,[[5,17,20,23]])})));return function(t,r,n){return e.apply(this,arguments)}}(),h=function(){var e=(0,u.default)(o.default.mark((function e(t,r){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(t,r,(function(e){return(0,l.fromNodejsBuffer)(Buffer.from(e))})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.packAboardBinaryPacketV1Node=h},665:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.uploadMultipleArtborads=t.uploadArtborad=t.retryUploadTask=t.retryUpload=t.designStartUploadTask=t.clearUploadaFailList=void 0;var o=n(r(292)),a=n(r(7006)),i=r(2346),s=(r(3160),r(5547)),u=r(7981),c=n(r(3342)),l=r(6791),f=r(5606),d=r(295),p=r(8253),h=n(r(8552)),g=[],y=[],v=function(){y=[],g=[]};t.clearUploadaFailList=v;var _=function(){var e=(0,a.default)(o.default.mark((function e(t,r){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(),m([],t,r);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.designStartUploadTask=_;var b=function(){var e=(0,a.default)(o.default.mark((function e(t,r){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0===r.isAll?y&&(n=r.projectCid,m(y,n,r,!1,!0)):t.forEach((function(e){S(e,r)}));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.retryUploadTask=b;var m=function(e,t,r,n,o){var a=r.uploadType,i=e.length>0||n?e:(0,p.getArtboradInfoWithType)(a);(0,f.sendActionToWebview)(l.ActionType.EXPORT_EXPORT_PROGRESS,{progress:.01,status:"ExportProgressing",retryList:[]});var c=new s.SerialQueue;i.forEach((function(e){c.addTast((0,u.getParseArtboardData)(e,e.id,r,t))})),i=[],c.startTask((function(e){(0,f.sendActionToWebview)(l.ActionType.PARSE_ARTBOARD_INFO,{artboardInfo:e})}))};t.uploadMultipleArtborads=m;var S=function(e,t){if(y)try{var r=y.find((function(t){return t.id===e}));if(r)return g.push(r),void(1===g.length&&w(t))}catch(n){console.log(n)}(0,f.sendActionToWebview)(l.ActionType.SINGLE_BORAD_UPLOAD,{id:e,progress:0,status:"fail"})};t.retryUpload=S;var w=function e(t){var r=function(r,n){if(g.length>0&&g.splice(0,1),r){var o=y.findIndex((function(e){return e.id===n}));o>-1&&y.splice(o,1)}setTimeout((function(){e(t)}),50)},n=t.projectCid;if(g.length>0){var o=g[0];A(o,n,t,!0)().then((function(){r(!0,o.id)}),(function(){r(!1,o.id)}))}},A=function(e,t,r,n,o){return function(){return new Promise((function(a,s){var u=r.fastUpload,c=r.group_cid,p=r.sliceUploadUrl,g=r.md5_hashs,y=r.repeatUploadUrl,v=e.id,_=e.pageID,b=e.md5_hash,m=function(r){if(r.name=e.name,n)i=r,(0,f.sendActionToWebview)(l.ActionType.ALL_ARTBORAD_EXPORT_SUCCESS,{projectCid:t,successInfos:[i]}),(0,f.sendActionToWebview)(l.ActionType.SINGLE_BORAD_UPLOAD,{id:v,progress:1,status:"success"});else if(h.default.sketchInfo.debugRetry&&!o)return void s(e);var i;a(r)},S=function(){n&&(0,f.sendActionToWebview)(l.ActionType.SINGLE_BORAD_UPLOAD,{id:v,progress:0,status:"fail"}),s(e)},w=[];if(g)try{w=JSON.parse(g)||[]}catch(E){console.log(E)}var A=w.find((function(e){return e.md5_hash===b}));if(A){var k=r.design_scale,O=A.cid,C={artboard_cid:O,md5_hash:b,project_cid:t,design_scale:i.util.toString(k)||""};(0,d.artboradAddVersion)(C,y).then((function(){m({artboardID:v,pageID:_,fastUpload:u,groupCid:c,projectCid:t,artboardCid:O,addVersion:!0})}),(function(e){S()}))}else x(e,t,r).then((function(r){T(e,t,p,(function(e){n&&(0,f.sendActionToWebview)(l.ActionType.SINGLE_BORAD_UPLOAD,{id:v,progress:e,status:e>=1?"success":"progressing"})})).then((function(e){try{var n=r.artboard_cid;m({artboardID:v,pageID:_,fastUpload:u,groupCid:c,projectCid:t,artboardCid:n,addVersion:!1})}catch(E){S()}}),(function(){}))}),(function(e){S()}))}))}};t.uploadArtborad=A;var x=function(e,t,r){var n=r.artboardUploadUrl,o={projectCid:t,artboardSketchID:e.id,arrayBuffer:e.artboardBuffer};return(0,d.designUploadArtborad)(o,n)},T=function(e,t,r,n){var o=e.sliceInfos,a=e.id;return new Promise((function(e,i){var s;s=[],o.forEach((function(e){var n=e.sliceArrayBuffer,o={projectCid:t,arrayBuffer:n,artboardSketchID:a};s.push((function(){return(0,d.designSliceUpload)(o,r)}))})),new c.default({retry_times:3,concurrent_size:3,tasks:s,handler:function(t){e(t)},progressHandle:n}).start()}))}},2611:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.closeSketchPlugin=function(){(0,s.closeSketch)()},t.designUpload=function(e,t){return g.apply(this,arguments)},t.getArtboradIDList=function(e){var t=[],r={},n=[];if("2"===e){var o=(0,h.getPageAllArtboradByLayers)(),a=o.artborads,i=o.page,s=i.id,u=i.name;r={name:u,pageID:s},a.forEach((function(e){t.push({id:e.id||"",pageID:s})})),n=[{pageID:s,pageName:u}]}else if("3"===e){var c=(0,h.getCurrentDocumentPages)(!0),l=c.allArtborads,f=c.pages,d=f[0],g=d.id,y=d.name;r={name:y,pageID:g},l.forEach((function(e){t.push({id:e.id||"",pageID:g})})),f.forEach((function(e){var t=e.id,r=e.name;n.push({pageID:t,pageName:r})}))}else{var v=(0,h.getSelectedArtboardByLayers)(),_=v.artborads,b=v.page,m=b.id,S=b.name;r={name:S,pageID:m},_.forEach((function(e){t.push({id:e.id||"",pageID:m})})),n=[{pageID:m,pageName:S}]}var w={artboradMap:t,pageInfo:r,sketchPageList:n};(0,p.sendActionToWebviewByChan)(JSON.stringify(w))},t.getVersionInfo=function(){var e=NSProcessInfo.processInfo().operatingSystemVersionString(),t=NSBundle.mainBundle().objectForInfoDictionaryKey("CFBundleShortVersionString"),r={macOSVersion:"".concat(e),sketchVersion:"".concat(t),sketchPluginVersion:u.sketchPluginVersion};(0,p.sendActionToWebviewByChan)(JSON.stringify(r))},t.initDomain=function(e,t){log({domain:(0,c.getDomain)()}),t?(0,i.checkUrl)(e).then((function(){(0,c.setDomain)(e),(0,p.sendActionToWebviewByChan)(f.ActionType.DOMAIN_SET_SUCCEED)})).catch((function(e){console.log(e),(0,p.sendActionToWebviewByChan)(f.ActionType.DOMAIN_SET_FAILED)})):((0,c.setDomain)(e),(0,p.sendActionToWebviewByChan)(f.ActionType.DOMAIN_SET_SUCCEED))},t.initRoute=function(){if(l.default.sketchInfo.permise&&!(0,c.getDomain)())return{local:!0,path:"/domain"};return{local:!1,path:"/redirect/sketch"}},t.openInBrowser=function(e){var t=NSURL.URLWithString(e);NSWorkspace.sharedWorkspace().openURL(t)},t.retryUpload=function(e,t){(0,d.retryUploadTask)(e,t)},t.sketchArtboradNumber=function(e){var t=(0,h.getSelectedArtboardByLayers)(!0),r=(0,h.getCurrentDocumentPages)(!1,!0),n=(0,h.getPageAllArtboradByLayers)(!0),o=n.number,a=n.page,i={artboard:t,page:r,allArtboard:o,pageInfo:a};e||(0,p.sendActionToWebviewByChan)(JSON.stringify(i));(0,p.sendActionToWebview)(f.ActionType.SKETCH_SELECT_CAHNGE,i)};var o=n(r(292)),a=n(r(7006)),i=r(295),s=r(5450),u=r(3152),c=r(9716),l=n(r(8552)),f=r(6791),d=r(665),p=r(5606),h=r(8253);function g(){return(g=(0,a.default)(o.default.mark((function e(t,r){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,d.designStartUploadTask)(t,r)}catch(n){log({error:n})}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},738:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.toU16String=t.toString=t.isEqualArrayBuffer=t.fromU16String=t.fromString=t.fromNodejsBuffer=t.deconcatArrayBuffer=t.concatArrayBuffer=t.calcSHA256ArrayBuffer=void 0;var o=n(r(292)),a=n(r(7006)),i=r(7719);t.isEqualArrayBuffer=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),o=0,a=e.byteLength;o<a;o++)if(r[o]!==n[o])return!1;return!0};var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Uint8Array(e.reduce((function(e,t){return e+t.byteLength}),0)),r=0;return e.forEach((function(e){var n=e.byteLength;t.set(new Uint8Array(e),r),r+=n})),t.buffer};t.concatArrayBuffer=s;t.deconcatArrayBuffer=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.map((function(t){var n=e.slice(r,r+t);return r+=t,n}))};var u=Uint8Array.of(0),c=Uint8Array.of(255,255),l=function(e,t,r){for(var n=[];t<r;t++)n.push(String.fromCharCode(e.getUint16(2*t,!1)));return n.join("")},f=function(e){console.log("####### 11111");var t=s([e.byteLength%2?u:c,e]);console.log("##### 222222");var r=new DataView(t);console.log("##### 3333");var n=[];try{console.log("##### 444");for(var o=0,a=r.byteLength/2;o<a;o+=12288)n.push(l(r,o,Math.min(a,o+12288)));console.log("####### stringList:",n)}catch(i){console.log("##### 55555"),console.log("##### error:",i)}return console.log("####### 6666 stringList:",n),n.join("")};t.toU16String=f;var d=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new DataView(new ArrayBuffer(2*e.length)),r=0,n=e.length;r<n;r++)t.setUint16(2*r,e.charCodeAt(r),!1);return t.buffer.slice(0===t.getUint8(0)?u.byteLength:c.byteLength)};t.fromU16String=d;var p=function(e){var t=e.buffer,r=e.byteOffset,n=e.byteLength;return t.byteLength===n?t:t.slice(r,r+n)};t.fromNodejsBuffer=p;var h=function(){try{var e=globalThis.crypto,t=globalThis.isSecureContext,r=function(){var t=(0,a.default)(o.default.mark((function t(r){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.subtle.digest("SHA-256",r));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();if(t&&e.subtle.digest)return r}catch(u){}try{var n=(0,i.tryRequire)("crypto").createHash,s=function(){var e=(0,a.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n("sha256").update(Buffer.from(t)).digest(),e.abrupt("return",p(r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(n&&n("sha256"))return s}catch(u){}return function(){var e=(0,a.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not supported");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}();t.calcSHA256ArrayBuffer=h;var g=d;t.fromString=g;var y=f;t.toString=y},4023:(e,t,r)=>{var n=r(2914).default;Object.defineProperty(t,"__esModule",{value:!0}),t.parseChainArrayBufferPacket=t.parseArrayBufferPacket=t.parseArrayBufferListPacket=t.parseArrayBufferHeader=t.packChainArrayBufferPacket=t.packArrayBufferPacket=t.packArrayBufferListPacket=t.packArrayBufferHeader=t.MAX_PACKET_HEADER_SIZE=t.HEADER_BYTE_SIZE=void 0;var o=n(r(6320)),a=n(r(5030)),i=n(r(4197)),s=r(738);t.MAX_PACKET_HEADER_SIZE=4294967295;t.HEADER_BYTE_SIZE=4;var u=new ArrayBuffer(0),c=function(e){var t=e.byteLength;if(t>4294967295)throw new Error("headerArrayBuffer exceeds max size 4294967295, get: ".concat(t));var r=new DataView(new ArrayBuffer(4));return r.setUint32(0,t,!1),[r.buffer,e]};t.packArrayBufferHeader=c;var l=function(e){var t=new DataView(e.slice(0,4)).getUint32(0,!1);return[e.slice(4,4+t),4+t]};t.parseArrayBufferHeader=l;t.packArrayBufferPacket=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return(0,s.concatArrayBuffer)([].concat((0,i.default)(c((0,s.fromU16String)(e))),[t]))};t.parseArrayBufferPacket=function(e){var t=l(e),r=(0,a.default)(t,2),n=r[0],o=r[1];return[(0,s.toU16String)(n),e.slice(o)]};t.packChainArrayBufferPacket=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new DataView(new ArrayBuffer(4*e.length));return e.forEach((function(e,r){var n=e.byteLength;return t.setUint32(4*r,n,!1)})),(0,s.concatArrayBuffer)([].concat((0,i.default)(c(t.buffer)),(0,i.default)(e)))};t.parseChainArrayBufferPacket=function(e){for(var t=l(e),r=(0,a.default)(t,2),n=r[0],o=r[1],i=new DataView(n),u=[],c=0,f=i.byteLength/4;c<f;c++)u.push(i.getUint32(4*c,!1));return(0,s.deconcatArrayBuffer)(e,u,o)};t.packArrayBufferListPacket=function(e){var t,r=[],n=(0,o.default)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.byteLength;if(i>4294967295)throw new Error("arrayBuffer exceeds max size 4294967295, get: ".concat(i));var u=new DataView(new ArrayBuffer(4));u.setUint32(0,i,!1),r.push(u.buffer,a)}}catch(c){n.e(c)}finally{n.f()}return(0,s.concatArrayBuffer)(r)};t.parseArrayBufferListPacket=function(e){for(var t=[],r=0;r<e.byteLength;){var n=new DataView(e.slice(r,r+4)).getUint32(0,!1);t.push(e.slice(r+4,r+4+n)),r+=4+n}return t}},7719:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.tryRequireResolve=exports.tryRequire=void 0;var tryRequire=function tryRequire(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return eval("require")(name)}catch(error){}};exports.tryRequire=tryRequire;var tryRequireResolve=function tryRequireResolve(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return eval("require.resolve")(name)}catch(error){}};exports.tryRequireResolve=tryRequireResolve},328:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},3193:e=>{var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],a=0;a<4;a++)8*n+6*a<=8*e.length?r.push(t.charAt(o>>>6*(3-a)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(n))>>>6-2*o);return r}},e.exports=r},2651:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},8167:(e,t,r)=>{var n,o,a,i,s;n=r(3193),o=r(328).utf8,a=r(2651),i=r(328).bin,(s=function e(t,r){t.constructor==String?t=r&&"binary"===r.encoding?i.stringToBytes(t):o.stringToBytes(t):a(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var s=n.bytesToWords(t),u=8*t.length,c=1732584193,l=-271733879,f=-1732584194,d=271733878,p=0;p<s.length;p++)s[p]=16711935&(s[p]<<8|s[p]>>>24)|4278255360&(s[p]<<24|s[p]>>>8);s[u>>>5]|=128<<u%32,s[14+(u+64>>>9<<4)]=u;var h=e._ff,g=e._gg,y=e._hh,v=e._ii;for(p=0;p<s.length;p+=16){var _=c,b=l,m=f,S=d;c=h(c,l,f,d,s[p+0],7,-680876936),d=h(d,c,l,f,s[p+1],12,-389564586),f=h(f,d,c,l,s[p+2],17,606105819),l=h(l,f,d,c,s[p+3],22,-1044525330),c=h(c,l,f,d,s[p+4],7,-176418897),d=h(d,c,l,f,s[p+5],12,1200080426),f=h(f,d,c,l,s[p+6],17,-1473231341),l=h(l,f,d,c,s[p+7],22,-45705983),c=h(c,l,f,d,s[p+8],7,1770035416),d=h(d,c,l,f,s[p+9],12,-1958414417),f=h(f,d,c,l,s[p+10],17,-42063),l=h(l,f,d,c,s[p+11],22,-1990404162),c=h(c,l,f,d,s[p+12],7,1804603682),d=h(d,c,l,f,s[p+13],12,-40341101),f=h(f,d,c,l,s[p+14],17,-1502002290),c=g(c,l=h(l,f,d,c,s[p+15],22,1236535329),f,d,s[p+1],5,-165796510),d=g(d,c,l,f,s[p+6],9,-1069501632),f=g(f,d,c,l,s[p+11],14,643717713),l=g(l,f,d,c,s[p+0],20,-373897302),c=g(c,l,f,d,s[p+5],5,-701558691),d=g(d,c,l,f,s[p+10],9,38016083),f=g(f,d,c,l,s[p+15],14,-660478335),l=g(l,f,d,c,s[p+4],20,-405537848),c=g(c,l,f,d,s[p+9],5,568446438),d=g(d,c,l,f,s[p+14],9,-1019803690),f=g(f,d,c,l,s[p+3],14,-187363961),l=g(l,f,d,c,s[p+8],20,1163531501),c=g(c,l,f,d,s[p+13],5,-1444681467),d=g(d,c,l,f,s[p+2],9,-51403784),f=g(f,d,c,l,s[p+7],14,1735328473),c=y(c,l=g(l,f,d,c,s[p+12],20,-1926607734),f,d,s[p+5],4,-378558),d=y(d,c,l,f,s[p+8],11,-2022574463),f=y(f,d,c,l,s[p+11],16,1839030562),l=y(l,f,d,c,s[p+14],23,-35309556),c=y(c,l,f,d,s[p+1],4,-1530992060),d=y(d,c,l,f,s[p+4],11,1272893353),f=y(f,d,c,l,s[p+7],16,-155497632),l=y(l,f,d,c,s[p+10],23,-1094730640),c=y(c,l,f,d,s[p+13],4,681279174),d=y(d,c,l,f,s[p+0],11,-358537222),f=y(f,d,c,l,s[p+3],16,-722521979),l=y(l,f,d,c,s[p+6],23,76029189),c=y(c,l,f,d,s[p+9],4,-640364487),d=y(d,c,l,f,s[p+12],11,-421815835),f=y(f,d,c,l,s[p+15],16,530742520),c=v(c,l=y(l,f,d,c,s[p+2],23,-995338651),f,d,s[p+0],6,-198630844),d=v(d,c,l,f,s[p+7],10,1126891415),f=v(f,d,c,l,s[p+14],15,-1416354905),l=v(l,f,d,c,s[p+5],21,-57434055),c=v(c,l,f,d,s[p+12],6,1700485571),d=v(d,c,l,f,s[p+3],10,-1894986606),f=v(f,d,c,l,s[p+10],15,-1051523),l=v(l,f,d,c,s[p+1],21,-2054922799),c=v(c,l,f,d,s[p+8],6,1873313359),d=v(d,c,l,f,s[p+15],10,-30611744),f=v(f,d,c,l,s[p+6],15,-1560198380),l=v(l,f,d,c,s[p+13],21,1309151649),c=v(c,l,f,d,s[p+4],6,-145523070),d=v(d,c,l,f,s[p+11],10,-1120210379),f=v(f,d,c,l,s[p+2],15,718787259),l=v(l,f,d,c,s[p+9],21,-343485551),c=c+_>>>0,l=l+b>>>0,f=f+m>>>0,d=d+S>>>0}return n.endian([c,l,f,d])})._ff=function(e,t,r,n,o,a,i){var s=e+(t&r|~t&n)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,r,n,o,a,i){var s=e+(t&n|r&~n)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,r,n,o,a,i){var s=e+(t^r^n)+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,r,n,o,a,i){var s=e+(r^(t|~n))+(o>>>0)+i;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(s(e,t));return t&&t.asBytes?r:t&&t.asString?i.bytesToString(r):n.bytesToHex(r)}},857:(module,__unused_webpack_exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(2914).default,_typeof2=_interopRequireDefault(__webpack_require__(451));module.exports=function MochaDelegate(definition,superclass){var uniqueClassName="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,superclass||NSObject),handlers={},ivars={};function setHandlerForSelector(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var args=[],regex=/:/g;regex.exec(selectorString);)args.push("arg"+args.length);var dynamicFunction=eval("(function ("+args.join(", ")+") { return handlers[selectorString].apply(this, arguments); })");delegateClassDesc.addInstanceMethodWithSelector_function(selector,dynamicFunction)}}function setIvar(e,t){var r=e in handlers;if(ivars[e]=t,!r){delegateClassDesc.addInstanceVariableWithName_typeEncoding(e,"@");var n=MOPropertyDescription.new();n.name=e,n.typeEncoding="@",n.weak=!0,n.ivarName=e,delegateClassDesc.addProperty(n)}}this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(e){var t=NSClassFromString(uniqueClassName).new();return Object.keys(ivars).forEach((function(e){t[e]=ivars[e]})),Object.keys(e||{}).forEach((function(r){t[r]=e[r]})),t},this.new=this.getClassInstance,"object"===(0,_typeof2.default)(definition)&&Object.keys(definition).forEach((function(e){"function"==typeof definition[e]?setHandlerForSelector(e,definition[e]):setIvar(e,definition[e])})),delegateClassDesc.registerClass()}},4045:(e,t,r)=>{var n,o=(0,r(2914).default)(r(451));try{n=r(871).Buffer}catch(i){}function a(e,t){for(var r,o=[],i=[],s={},u=0;u<e.allHeaderFields().allKeys().length;u++){var c=e.allHeaderFields().allKeys()[u].toLowerCase(),l=String(e.allHeaderFields()[c]);o.push(c),i.push([c,l]),r=s[c],s[c]=r?r+","+l:l}return{ok:1==(e.statusCode()/200|0),status:Number(e.statusCode()),statusText:String(NSHTTPURLResponse.localizedStringForStatusCode(e.statusCode())),useFinalURL:!0,url:String(e.URL().absoluteString()),clone:a.bind(this,e,t),text:function(){return new Promise((function(e,r){var n=String(NSString.alloc().initWithData_encoding(t,NSASCIIStringEncoding));n?e(n):r(new Error("Couldn't parse body"))}))},json:function(){return new Promise((function(e,r){var n=String(NSString.alloc().initWithData_encoding(t,NSUTF8StringEncoding));n?e(JSON.parse(n)):r(new Error("Could not parse JSON because it is not valid UTF-8 data."))}))},blob:function(){return Promise.resolve(t)},arrayBuffer:function(){return Promise.resolve(n.from(t))},headers:{keys:function(){return o},entries:function(){return i},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}}e.exports=function(e,t){if("object"!==(0,o.default)(e)||e.isKindOfClass&&e.isKindOfClass(NSString)||(e=(t=e).url),t=t||{},!e)return Promise.reject("Missing URL");var r;try{r=coscript.createFiber()}catch(i){coscript.shouldKeepAround=!0}return new Promise((function(o,s){var u=NSURL.alloc().initWithString(e),c=NSMutableURLRequest.requestWithURL(u);if(c.setHTTPMethod(t.method||"GET"),Object.keys(t.headers||{}).forEach((function(e){c.setValue_forHTTPHeaderField(t.headers[e],e)})),t.body){var l;if("string"==typeof t.body)l=NSString.alloc().initWithString(t.body).dataUsingEncoding(NSUTF8StringEncoding);else if(n&&n.isBuffer(t.body))l=t.body.toNSData();else if(t.body.isKindOfClass&&1==t.body.isKindOfClass(NSData))l=t.body;else if(t.body._isFormData){var f=t.body._boundary;(l=t.body._data).appendData(NSString.alloc().initWithString("--"+f+"--\r\n").dataUsingEncoding(NSUTF8StringEncoding)),c.setValue_forHTTPHeaderField("multipart/form-data; boundary="+f,"Content-Type")}else{var d;l=NSJSONSerialization.dataWithJSONObject_options_error(t.body,NSJSONWritingPrettyPrinted,d),c.setValue_forHTTPHeaderField(""+l.length(),"Content-Length")}c.setHTTPBody(l)}if(t.cache)switch(t.cache){case"reload":case"no-cache":case"no-store":c.setCachePolicy(1);break;case"force-cache":c.setCachePolicy(2);break;case"only-if-cached":c.setCachePolicy(3)}t.credentials||c.setHTTPShouldHandleCookies(!1);var p=!1,h=NSURLSession.sharedSession().dataTaskWithRequest_completionHandler(c,__mocha__.createBlock_function('v32@?0@"NSData"8@"NSURLResponse"16@"NSError"24',(function(e,t,n){r?r.cleanup():coscript.shouldKeepAround=!1,p=!0;try{if(n){var u=new TypeError(String("function"==typeof n.localizedDescription?n.localizedDescription():n));return void s(u)}o(a(t,e))}catch(i){s(i)}})));h.resume(),r&&r.onCleanup((function(){p||h.cancel()}))}))}},871:e=>{e.exports=require("buffer")},420:e=>{e.exports=require("sketch")},7290:e=>{e.exports=require("sketch/dom")},3726:e=>{e.exports=require("sketch/settings")},5349:e=>{e.exports=require("sketch/ui")},1914:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},9066:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},6177:(e,t,r)=>{var n=r(1914);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7006:e=>{function t(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,a){var i=e.apply(r,n);function s(e){t(i,o,a,s,u,"next",e)}function u(e){t(i,o,a,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},8073:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},1372:e=>{function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},6320:(e,t,r)=>{var n=r(9775);e.exports=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}},e.exports.__esModule=!0,e.exports.default=e.exports},5751:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},2914:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},691:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6213:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(u){s=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},6819:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},1635:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},6595:(e,t,r)=>{var n=r(5751);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},9213:(e,t,r)=>{var n=r(9187);e.exports=function(e,t){if(null==e)return{};var r,o,a=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a},e.exports.__esModule=!0,e.exports.default=e.exports},9187:e=>{e.exports=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.__esModule=!0,e.exports.default=e.exports},5253:(e,t,r)=>{var n=r(451).default;function o(){e.exports=o=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(E){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),i=new k(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=A(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=d(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(E){return{type:"throw",arg:E}}}t.wrap=f;var p={};function h(){}function g(){}function y(){}var v={};l(v,s,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(O([])));b&&b!==r&&a.call(b,s)&&(v=b);var m=y.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,i,s,u){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function A(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=d(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}return g.prototype=y,l(m,"constructor",y),l(y,"constructor",g),g.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(m),e},t.awrap=function(e){return{__await:e}},S(w.prototype),l(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new w(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(m),l(m,c,"Generator"),l(m,s,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},5030:(e,t,r)=>{var n=r(9066),o=r(6213),a=r(9775),i=r(6819);e.exports=function(e,t){return n(e)||o(e,t)||a(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},4197:(e,t,r)=>{var n=r(6177),o=r(691),a=r(9775),i=r(1635);e.exports=function(e){return n(e)||o(e)||a(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},451:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9775:(e,t,r)=>{var n=r(1914);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},292:(e,t,r)=>{var n=(0,r(2914).default)(r(451)),o=r(5253)();e.exports=o;try{regeneratorRuntime=o}catch(a){"object"===("undefined"==typeof globalThis?"undefined":(0,n.default)(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},8552:e=>{e.exports=JSON.parse('{"name":"📙 墨刀-设计协作","description":"一站式设计交付工具。更新完成后请重启Sketch。","icon":"icon.png","author":"","authorEmail":"support@mockingbot.com","homepage":"https://modao.cc/feature/aboard/","version":"1.1.0","appcast":"https://modao.cc/sketch-aboard-appcast.xml","identifier":"com.mockingBot.aboard-plugin","compatibleVersion":"47","bundleVersion":"1","disableCocoaScriptPreprocessor":true,"sketchInfo":{"host":"https://modao.cc","debugLog":false,"debugRetry":false,"permise":false,"permisePing":true,"fetchBuffer":false},"commands":[{"script":"plugin.js","handler":"openWindow","shortcut":"cmd shift x","name":"上传画板","identifier":"openWindow"},{"script":"plugin.js","handler":"helpCenter","name":"帮助中心","identifier":"helpCenter"},{"script":"plugin.js","handler":"clearCache","name":"清除缓存","identifier":"clearCache"},{"name":"Selection changed","identifier":"selection-changed","script":"plugin.js","handlers":{"actions":{"SelectionChanged.finish":"onSelectionChanged"}}}],"menu":{"items":["openWindow","helpCenter","clearCache"]}}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}var __webpack_exports__={};(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),e.clearCache=function(e){(0,t.setContext)(e),(0,o.clearSettings)(),(0,o.updateClearStatus)(!0),(0,n.sendActionToWebview)("clear_cache_info",{})},e.helpCenter=function(e){(0,t.setContext)(e);var r=NSURL.URLWithString("https://modao.kf5.com/hc/kb/article/1533576");NSWorkspace.sharedWorkspace().openURL(r)},e.onSelectionChanged=function(e){(0,t.setContext)(e),(0,a.sketchArtboradNumber)(!0)},e.openWindow=function(e){(0,t.setContext)(e),(0,o.initSetting)();var a=(0,n.findWindow)(n.windowIdentifier);if(a)return a.makeKeyAndOrderFront(null),void a.setLevel(NSFloatingWindowLevel);var i=(0,r.createWindow)(n.windowIdentifier),s=i.window,u=i.frame,c=(0,n.createWebView)(u);s.contentView().addSubview(c)};var t=__webpack_require__(3152),r=__webpack_require__(5450),n=__webpack_require__(5606),o=__webpack_require__(9716),a=__webpack_require__(2611)})(),handlers=__webpack_exports__})();

var openWindow = handlers.openWindow;

var helpCenter = handlers.helpCenter;

var clearCache = handlers.clearCache;

var onSelectionChanged = handlers.onSelectionChanged;